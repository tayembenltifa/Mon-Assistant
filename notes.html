<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Notes - Mon Assistant</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <nav class="navbar">
        <div class="nav-brand">
            <i class="fas fa-robot"></i>
            <span>Mon Assistant</span>
        </div>
        <div class="nav-links">
            <a href="index.html" class="nav-link">
                <i class="fas fa-home"></i> Dashboard
            </a>
            <a href="tasks.html" class="nav-link">
                <i class="fas fa-tasks"></i> Tâches
            </a>
            <a href="notes.html" class="nav-link active">
                <i class="fas fa-sticky-note"></i> Notes
            </a>
            <a href="calendar.html" class="nav-link">
                <i class="fas fa-calendar"></i> Calendrier
            </a>
            <a href="goals.html" class="nav-link">
                <i class="fas fa-bullseye"></i> Objectifs
            </a>
        </div>
        <div class="nav-theme">
            <button id="themeToggle">
                <i class="fas fa-moon"></i>
            </button>
        </div>
    </nav>

    <main class="dashboard-main">
        <div class="dashboard-header">
            <h1><i class="fas fa-sticky-note"></i> Mes Notes</h1>
            <p>Capture tes idées et pensées</p>
        </div>

        <div class="quick-stats">
            <div class="stat-card">
                <div class="stat-icon">
                    <i class="fas fa-sticky-note"></i>
                </div>
                <div class="stat-info">
                    <h3 id="notesTotal">0</h3>
                    <p>Notes totales</p>
                </div>
            </div>
        </div>

        <div class="dashboard-grid">
            <!-- Formulaire -->
            <div class="dashboard-widget">
                <div class="widget-header">
                    <h2><i class="fas fa-plus"></i> Nouvelle Note</h2>
                </div>
                <div class="widget-content">
                    <form id="noteForm">
                        <div style="margin-bottom: 1rem;">
                            <input type="text" id="noteTitle" placeholder="Titre de la note" style="width: 100%; padding: 0.75rem; border: 1px solid var(--gray-light); border-radius: var(--radius); margin-bottom: 1rem;">
                            <textarea id="noteContent" placeholder="Contenu de la note..." style="width: 100%; padding: 0.75rem; border: 1px solid var(--gray-light); border-radius: var(--radius); height: 150px; resize: vertical;"></textarea>
                        </div>
                        <button type="submit" style="background: var(--primary); color: white; border: none; padding: 0.75rem 1.5rem; border-radius: var(--radius); cursor: pointer; width: 100%;">
                            <i class="fas fa-save"></i> Sauvegarder la Note
                        </button>
                    </form>
                </div>
            </div>

            <!-- Liste des notes -->
            <div class="dashboard-widget">
                <div class="widget-header">
                    <h2><i class="fas fa-list"></i> Mes Notes</h2>
                </div>
                <div class="widget-content">
                    <div id="notesList" class="notes-list">
                        <!-- Les notes seront ajoutées ici -->
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script src="app.js"></script>
    <script>
        class NotesManager {
            constructor() {
                this.notes = JSON.parse(localStorage.getItem('notes')) || [];
                this.init();
            }

            init() {
                this.setupEventListeners();
                this.renderNotes();
                this.updateStats();
            }

            setupEventListeners() {
                document.getElementById('noteForm').addEventListener('submit', (e) => {
                    e.preventDefault();
                    this.addNote();
                });
            }

            addNote() {
                const titleInput = document.getElementById('noteTitle');
                const contentInput = document.getElementById('noteContent');
                const title = titleInput.value.trim();
                const content = contentInput.value.trim();

                if (title && content) {
                    const note = {
                        id: Date.now(),
                        title: title,
                        content: content,
                        createdAt: new Date().toISOString()
                    };

                    this.notes.push(note);
                    this.saveNotes();
                    this.renderNotes();
                    this.updateStats();
                    
                    titleInput.value = '';
                    contentInput.value = '';
                    
                    // Mettre à jour le dashboard principal
                    if (window.app) {
                        window.app.updateDashboard();
                    }
                }
            }

            deleteNote(id) {
                if (confirm('Supprimer cette note ?')) {
                    this.notes = this.notes.filter(note => note.id !== id);
                    this.saveNotes();
                    this.renderNotes();
                    this.updateStats();
                    
                    if (window.app) {
                        window.app.updateDashboard();
                    }
                }
            }

            renderNotes() {
                const container = document.getElementById('notesList');
                
                if (this.notes.length === 0) {
                    container.innerHTML = '<div class="note-item">Aucune note pour le moment</div>';
                    return;
                }

                container.innerHTML = this.notes.map(note => `
                    <div class="note-item">
                        <div style="display: flex; justify-content: between; align-items: start; gap: 1rem;">
                            <div style="flex: 1;">
                                <div class="note-title">${note.title}</div>
                                <div class="note-preview">${note.content}</div>
                                <div class="task-meta">${new Date(note.createdAt).toLocaleDateString('fr-FR')}</div>
                            </div>
                            <button onclick="notesManager.deleteNote(${note.id})" style="background: none; border: none; color: var(--danger); cursor: pointer; padding: 0.5rem;">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div>
                `).join('');
            }

            updateStats() {
                document.getElementById('notesTotal').textContent = this.notes.length;
            }

            saveNotes() {
                localStorage.setItem('notes', JSON.stringify(this.notes));
            }
        }

        const notesManager = new NotesManager();
    </script>
</body>
</html>
